# 用户手册

bpm是个命令行程序，很明显，它根本不是为计算机小白准备的，请确认您的计算机认知，然后再考虑阅读此手册。

## 我该如何启动 bpm？

### Windows

如果你只会通过双击程序来启动程序，并且拒绝学习任何新方法用于启动程序，建议立即关闭这个文档并删除所有bpm内容。

下载安装包后，务必完全解压到一个空白文件夹中。

先来安装安装环境，[点击这里](https://dotnet.microsoft.com/download)前往 .Net Core 下载网址，并下载对应的 Windows 安装包（下载 Runtime 即可）

首先使用搜索功能（Windows 7 在开始菜单下方，Windows 10 请使用 Cortana）搜索 Cmd ，找到后右键-以管理员身份执行。

然后前往你放有 bpm 的文件夹，复制这个文件夹的地址，它看起来可能比较像`D:\MySoftware\bpm`，我们把这堆文本记为xxx。

然后在你刚刚打开的 Cmd 窗口中输入指令`cd /d xxx`，其中 xxx 是你刚刚复制的文件夹地址，然后回车

然后输入`bpm help`并回车，如果能输出一串帮助文档，则表明没有问题了。

另外，在上述过程中，可能会有一个要求您输入一个地址的步骤，请参见注意事项自行决策。

此后，如果需要运行其他命令，只需要输入`bpm 命令名 参数1 参数2 ...`即可

### Linux

我们默认使用 Linux 的您掌握了一切基础的计算机知识。

同样的，请先前往[.Net Core 下载网址](https://dotnet.microsoft.com/download)查阅如何配置 .Net Core 环境

然后转到你下载的 bpm 压缩包。解压它。然后在当前文件夹打开 Terminal

您可以输入`bpm.sh help`并回车来验证环境的配置正确。

另外，在上述过程中，可能会有一个要求您输入一个地址的步骤，请参见注意事项自行决策。

此后，如果需要运行其他命令，只需要输入`bpm 命令名 参数1 参数2 ...`即可（至于如何让 bpm 成为一个全局命令，我相信您一定会操作）

## 注意事项

* 第一次启动 bpm 会自动建立一系列文件夹，在任何时候都请勿删除这些文件夹
* 执行`bpm update`之后会在本地得到一个`package.db`，请在任何时候都不要删除这个文件
* 在安装任意一个包之后，会在本地得到一个`InstallRecord.db`，也请在任何时候都不要删除这个文件
* bpm 不会自动识别您已安装的 Ballance。相反，我们反而建议您在一台没有安装 Ballance 的计算机上先安装 bpm，或者是卸载现在安装过的 Ballance 转而安装 bpm，然后由 bpm 安装 Ballance，这样可使 bpm 得以管理一切，bpm 和会在启动的时候要求您输入一个存在文件夹的路径，bpm 会将所有游戏文件存储在那。如果您坚持使用您自己安装的 Ballance，也是可以的，您只需要在开头路径输入环节输入您的 Ballance 根目录即可，但请务必确保您的 Ballance 是英文原版，没有任何修改，否则任何命令执行时的错误，我都不会给予帮助支持。使用 bpm 安装 Ballance 的命令是`bpm install ballance@v1.13`
* 默认语言为英语，使用`bpm config Language zh-cn`设置中文
* 默认连接到 Ballance 资源总服务器，如果需要连接其它服务器，使用`bpm config Sources IP:Port`进行设置
* 第一次启动后，需要执行`bpm update`更新包数据库后才能执行大部分操作
* Linux下的运行本人没有测试
* 如果您的Ballance安装在系统目录下，您可能需要每次都以管理员身份启动`bpm`
* Windows下，执行安装Ballance的命令时，务必以管理员模式启动`bpm`，因为我们需要操作注册表以注册Ballance。如果未按此操作进行，造成的后果不会提供任何技术支持

## 各命令参数解释

* `list`
  - `list`：列出当前安装的包信息
* `update`
  - `update`：与远程服务器同步包数据库
* `show`
  - `show 包名`：输出指定包的详细信息，包名需要指定版本号
* `search`
  - `search 单词1 单词2 ...`：从数据库中搜索与所提供单词有关的包，会搜索包名与包别名。可指定多个搜索单词，单词数量不受限制
* `install`
  - `install 包名`：安装指定包，包名可以不指定版本号（默认安装最高版本）
* `remove`
  - `remove 包名`：移除指定包，包名可以不指定版本号（默认删除全部版本）
* `guide`
  - `guide 包名`：展示指定包的帮助，大多都是帮助您确认deploy参数，包名需要指定版本号
* `deploy`
  - `deploy 包名 参数`：配置包，用于地图，背景等各类资源包的配置，包名需要指定版本号
* `clean`
  - `clean`：删除所有缓存文件（下载zip以及依赖json）
  - `clean 包名`：删除指定包的缓存文件，包名可以不指定版本号（默认删除全部版本）
* `config`
  - `config`：列出所有设置项及其值
  - `config 设置名`：列出指定设置项的值
  - `config 设置名 新值`：修改指定设置项的值
